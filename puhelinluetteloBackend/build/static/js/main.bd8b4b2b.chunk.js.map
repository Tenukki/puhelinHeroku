{"version":3,"sources":["../../../HarjotusGit/osa3/puhelinluetteloFrontEnd/puhelinluettelo/src/connect.js","../../../HarjotusGit/osa3/puhelinluetteloFrontEnd/puhelinluettelo/src/App.js","../../../HarjotusGit/osa3/puhelinluetteloFrontEnd/puhelinluettelo/src/index.js"],"names":["baseUrl","connect","axios","get","then","response","data","newObject","post","id","put","concat","delete","Note","props","react_default","a","createElement","Fragment","className","nimi","puh","onClick","Poistaklikki","InfoMessage","_ref","teksti","Filter","value","newRaja","onChange","handleRajaChange","PersonForm","onSubmit","addName","newName","handleNameChange","newPuh","handlePuhChange","type","Numbers","rivit","App","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewPuh","_useState7","_useState8","setNewRaja","_useState9","_useState10","virhe","setVirhe","useEffect","noteService","objects","console","log","App_InfoMessage","App_Filter","event","target","App_PersonForm","preventDefault","forEach","element","name","number","JSON","stringify","setTimeout","noteObject","window","confirm","asia","filter","sana","includes","map","App_Note","key","poista","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.bd8b4b2b.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = 'https://puhelinbackend.herokuapp.com/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst poista = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default { getAll, create, update , poista}","import React, { useState, useEffect } from 'react'\r\nimport noteService from './connect'\r\nimport './index'\r\n\r\nconst Note = (props) => {\r\n  return (\r\n    <>\r\n      <p className = 'note'>{props.nimi} {props.puh}\r\n       <button onClick = {props.Poistaklikki}>poista</button>\r\n      </p>\r\n    </>\r\n  )\r\n}\r\n\r\nconst InfoMessage = ({teksti}) => {\r\n  if(teksti === null){\r\n    return (\r\n      <>\r\n      </>\r\n    )\r\n  }else{\r\n    return (\r\n      <h1 className = 'virhe'>{teksti}</h1>\r\n    )\r\n  }\r\n  \r\n  \r\n}\r\nconst Filter = (props) => {\r\n  return (\r\n    <form>\r\n        <div>\r\n          rajaa näytettäviä<input value = {props.newRaja} onChange = {props.handleRajaChange}/>\r\n        </div>\r\n      </form>\r\n  )\r\n}\r\n\r\nconst PersonForm = (props) => {\r\n  return (\r\n    <form onSubmit = {props.addName}>\r\n        <div>\r\n          nimi: <input value = {props.newName} onChange = {props.handleNameChange}/>\r\n        </div>\r\n        <div>numero: <input value = {props.newPuh} onChange = {props.handlePuhChange}/></div>\r\n        <div>\r\n          <button type=\"submit\">lisää</button>\r\n        </div>\r\n      </form>\r\n  )\r\n}\r\n\r\nconst Numbers = (props) => {\r\n  return props.rivit\r\n}\r\n\r\n\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newPuh, setNewPuh ] = useState('')\r\n  const [ newRaja, setNewRaja ] = useState('')\r\n  const [virhe, setVirhe ] = useState(null)\r\n\r\n  useEffect(() => {\r\n    noteService\r\n      .getAll().then(objects => {\r\n        console.log('promise fulfilled')\r\n        setPersons(objects)\r\n      })\r\n  }, [])\r\n\r\n  const poista = (element) => {\r\n    let arvo = window.confirm(`Poistetaanko ${element.name}`)\r\n    if(arvo){\r\n      console.log(element.id)\r\n      noteService.poista(element.id).then(a => {\r\n        console.log(\"Mitä poistetaan\" + a)\r\n        noteService.getAll().then(asia => {\r\n          console.log(\"asetetaan uudet tiedot\"+ asia)\r\n          console.log(\"Hell\" +asia)\r\n          setPersons(asia)\r\n        })\r\n\r\n      })\r\n      setVirhe(\r\n        `Henkilö ${newName} poistettiin tietokannasta`\r\n      )\r\n      setTimeout(() => {\r\n        setVirhe(null)\r\n      }, 5000)\r\n      \r\n    }\r\n    \r\n  }\r\n  \r\n  const rivit = () => {\r\n    console.log(\"taulukko \" + persons)\r\n    return persons.filter(sana => sana.name.includes(newRaja)).map(element =>\r\n        <Note nimi = {element.name} puh = {element.number} key = {element.id} \r\n        Poistaklikki = {() => poista(element)}\r\n        />\r\n    )\r\n    \r\n  }\r\n    \r\n  const handleNameChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handlePuhChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewPuh(event.target.value)\r\n  }\r\n\r\n  const handleRajaChange = (event) => {\r\n    console.log(event.target.value)\r\n    setNewRaja(event.target.value)\r\n  }\r\n\r\n  \r\n  \r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n    let a = false;\r\n    let id = null;\r\n    persons.forEach(element =>{\r\n      if(element.name === newName){\r\n        a = true\r\n        id = element.id\r\n      }\r\n    })\r\n\r\n    if(a === false){\r\n      const noteObject = {\r\n        name : newName,\r\n        number : newPuh\r\n      }\r\n\r\n      noteService\r\n      .create(noteObject)\r\n      .then(response => {\r\n        console.log(\"palautus\"+JSON.stringify(response))\r\n        //asettaa uuden datan person tauluun\r\n        setPersons(response)\r\n        setNewName('')\r\n        setNewPuh(\"\")\r\n        console.log(\"Menikö se sinne\")\r\n        \r\n        setVirhe(\r\n          `Henkilö '${newName}' lisättiin palvelimelle`\r\n        )\r\n        setTimeout(() => {\r\n          setVirhe(null)\r\n        }, 5000)\r\n\r\n\r\n      })\r\n    }else{\r\n      const noteObject = {\r\n        name : newName,\r\n        number : newPuh\r\n      }\r\n      let arvo = window.confirm(`${newName} on jo luettelossa korvataanko uudella?`)\r\n      if(arvo){\r\n        noteService.update(id, noteObject).then(asia => {\r\n          noteService.getAll().then(asia => {\r\n            setPersons(asia)\r\n          })\r\n        })\r\n        setVirhe(\r\n          `Henkilö '${newName}' korvattiin palvelimella`\r\n        )\r\n        setTimeout(() => {\r\n          setVirhe(null)\r\n        }, 5000)\r\n      }else{\r\n        setNewName(\"\")\r\n        setNewPuh(\"\")\r\n      }\r\n      \r\n    }\r\n    a = false\r\n  }\r\n\r\n  \r\n  return (\r\n    <div>\r\n      <h2>Puhelinluettelo</h2>\r\n      <InfoMessage teksti = {virhe}/>\r\n      <Filter newRaja = {newRaja} handleRajaChange = {handleRajaChange}/>\r\n      <h2>Lisää uusi</h2>\r\n      <PersonForm addName = {addName} newName = {newName} handleNameChange = {handleNameChange}\r\n      newPuh = {newPuh} handlePuhChange = {handlePuhChange}/>\r\n      <h2>Numerot</h2>\r\n      <Numbers rivit = {rivit()}/>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n\r\n"],"sourceRoot":""}